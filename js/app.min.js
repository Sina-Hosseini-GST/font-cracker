const section=document.querySelector("section"),article=document.querySelector("article"),paragraph=document.querySelector("p"),fileLabel=document.querySelector("#file-label"),file=document.querySelector("#file"),column=document.querySelector("#column"),row=document.querySelector("#row"),form=document.querySelector("form"),image=document.querySelector("img"),reverseCheckbox=document.querySelector("#reverse-checkbox"),removeButton=document.querySelector("#remove-button");let isReverse=!1;file.addEventListener("change",event=>{section.innerHTML="",removeAllPortions();const target=event.target,files=target.files,fileReader=new FileReader;fileReader.onload=function(){image.src=fileReader.result},fileReader.readAsDataURL(files[0])}),form.addEventListener("submit",event=>{event.preventDefault();const numberOfColumns=column.value,numberOfRows=row.value,imageAddress=image.getAttribute("src");removeAlertBorder(fileLabel),removeAlertBorder(column),removeAlertBorder(row),numberOfColumns&&numberOfRows&&imageAddress?createPortions():(imageAddress||addAlertBorder(fileLabel),numberOfColumns||addAlertBorder(column),numberOfRows||addAlertBorder(row))}),window.addEventListener("resize",()=>{createPortions()});const createPortions=()=>{section.innerHTML="";const imageWidth=image.offsetWidth,imageHeight=image.offsetHeight,numberOfColumns=column.value,numberOfRows=row.value,portionWidth=imageWidth/numberOfColumns,portionHeight=imageHeight/numberOfRows;for(let i=0;i<numberOfRows;i++)for(let j=0;j<numberOfColumns;j++)section.insertAdjacentHTML("beforeend",`<div class="bg-pink-950 hover:bg-rose-800 transition-colors cursor-pointer relative overflow-hidden w-full" onclick="addPortion(this)" title="Add the block" style="width: ${portionWidth}px; height: ${portionHeight}px;">\n        <img src="${image.getAttribute("src")}" alt="Block [${i+1}][${j+1}]" class="absolute rendering-pixelated max-w-c" style="width: ${100*numberOfColumns}%; left: -${100*j}%; top: -${100*i}%;">\n      </div>`);for(let i=0;i<paragraph.childElementCount;i++){const portion=paragraph.children[i];portion.style.width=`${portionWidth}px`,portion.style.height=`${portionHeight}px`}},addPortion=element=>{article.classList.remove("hidden"),paragraph.insertAdjacentHTML("beforeend",`<div class="bg-green-900 hover:bg-green-700 transition-colors cursor-pointer relative overflow-hidden" onclick="removePortion(this)" title="Remove the block" style="width: ${element.offsetWidth}px; height: ${element.offsetHeight}px;">\n    ${element.innerHTML}\n  </div>`)},removePortion=element=>{element.remove(),paragraph.childElementCount||article.classList.add("hidden")},removeAllPortions=()=>{paragraph.innerHTML="",article.classList.add("hidden")};removeButton.addEventListener("click",()=>{removeAllPortions()}),reverseCheckbox.addEventListener("change",()=>{isReverse=!isReverse,isReverse?paragraph.classList.add("flex-row-reverse"):paragraph.classList.remove("flex-row-reverse")});const addAlertBorder=element=>{element.classList.add("border-2","border-red-600")},removeAlertBorder=element=>{element.classList.remove("border-2","border-red-600")};